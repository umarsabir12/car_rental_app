%section.py-16.px-4.sm:px-6.lg:px-8.bg-white
  .max-w-4xl.mx-auto
    .text-center.mb-12
      %h2.text-4xl.md:text-5xl.font-bold.text-gray-900.mb-4
        Frequently Asked Questions
      %p.text-lg.text-gray-600
        Everything you need to know about partnering with WheelsOnRent

    .space-y-4
      - @faqs.each_with_index do |faq, index|
        .faq-item.border.border-gray-200.rounded-lg.overflow-hidden.transition-all.duration-300.hover:border-blue-400
          %button.faq-toggle.w-full.px-6.py-4.flex.items-center.justify-between.bg-gray-50.hover:bg-gray-100.transition-colors{
            type: 'button',
            data: { target: "faq-answer-#{index}" }
          }
            %h3.text-left.font-semibold.text-gray-900.text-base.md:text-lg
              = faq[:question]
            .flex.items-center.justify-center.w-6.h-6.rounded-full.flex-shrink-0{ style: "background-color: #3A6363" }
              %svg.faq-icon.w-4.h-4.text-white.transition-transform.duration-300{
                fill: 'none',
                stroke: 'currentColor',
                viewBox: '0 0 24 24'
              }
                %line{x1: '12', y1: '5', x2: '12', y2: '19', 'stroke-width': '2', 'stroke-linecap': 'round'}
                %line{x1: '5', y1: '12', x2: '19', y2: '12', 'stroke-width': '2', 'stroke-linecap': 'round'}

          .faq-answer.hidden.bg-white.border-t.border-gray-200{
            id: "faq-answer-#{index}"
          }
            .px-6.py-4.text-gray-600.text-base.leading-relaxed
              = faq[:answer]

%script
  :plain
    document.addEventListener('DOMContentLoaded', function() {
      const faqToggles = document.querySelectorAll('.faq-toggle');

      faqToggles.forEach(toggle => {
        toggle.addEventListener('click', function() {
          const targetId = this.dataset.target;
          const answer = document.getElementById(targetId);
          const icon = this.querySelector('.faq-icon');

          // Close other FAQs (accordion behavior)
          document.querySelectorAll('.faq-answer').forEach(item => {
            if (item.id !== targetId) {
              item.classList.add('hidden');
            }
          });

          // Reset other icons
          document.querySelectorAll('.faq-icon').forEach(i => {
            if (i !== icon) {
              i.style.transform = 'rotate(0deg)';
            }
          });

          // Toggle current FAQ
          answer.classList.toggle('hidden');
          icon.style.transform = answer.classList.contains('hidden') ? 'rotate(0deg)' : 'rotate(45deg)';
        });
      });
    });
