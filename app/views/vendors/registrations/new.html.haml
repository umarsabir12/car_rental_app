.container.mx-auto.max-w-2xl.p-8
  .bg-white.rounded-xl.shadow-lg.overflow-hidden.p-12
    .text-center.mb-8
      %i.fas.fa-store.text-5xl.mb-4{style: "color: #3A6363"}
      %h2.text-4xl.font-extrabold.text-gray-800.mb-2 Create Vendor Account
      %p.text-lg.text-gray-700.mb-2 Welcome! Please fill in your details to get started as a vendor on WheelsOnRent.
      %p.text-gray-500 Create a vendor account to list and manage your cars

    = form_for(resource, as: resource_name, url: registration_path(resource_name), html: { class: "space-y-6" }) do |f|
      .field.space-y-2
        = f.label :email, class: "block text-sm font-medium text-gray-700"
        = f.email_field :email, readonly: true, value: @vendor&.email, class: "w-full px-4 py-3 rounded-lg border border-gray-300 transition", style: "outline: none; border-color: #d1d5db;", onFocus: "this.style.borderColor='#3A6363'; this.style.boxShadow='0 0 0 3px rgba(58, 99, 99, 0.1)'", onBlur: "this.style.borderColor='#d1d5db'; this.style.boxShadow='none'", placeholder: "your@email.com"

      .field.space-y-2
        = f.label :first_name, class: "block text-sm font-medium text-gray-700"
        = f.text_field :first_name, autofocus: true, class: "w-full px-4 py-3 rounded-lg border border-gray-300 transition", style: "outline: none; border-color: #d1d5db;", onFocus: "this.style.borderColor='#3A6363'; this.style.boxShadow='0 0 0 3px rgba(58, 99, 99, 0.1)'", onBlur: "this.style.borderColor='#d1d5db'; this.style.boxShadow='none'", placeholder: "First Name"

      .field.space-y-2
        = f.label :last_name, class: "block text-sm font-medium text-gray-700"
        = f.text_field :last_name, autofocus: true, class: "w-full px-4 py-3 rounded-lg border border-gray-300 transition", style: "outline: none; border-color: #d1d5db;", onFocus: "this.style.borderColor='#3A6363'; this.style.boxShadow='0 0 0 3px rgba(58, 99, 99, 0.1)'", onBlur: "this.style.borderColor='#d1d5db'; this.style.boxShadow='none'", placeholder: "Last Name"

      .field.space-y-2
        = f.label :company_name, class: "block text-sm font-medium text-gray-700"
        = f.text_field :company_name,
          class: "w-full px-4 py-3 rounded-lg border border-gray-300 transition", style: "outline: none; border-color: #d1d5db;", onFocus: "this.style.borderColor='#3A6363'; this.style.boxShadow='0 0 0 3px rgba(58, 99, 99, 0.1)'", onBlur: "this.style.borderColor='#d1d5db'; this.style.boxShadow='none'",
          placeholder: "Company Name"

      .field.space-y-2
        = f.label :payment_mode, "Preferred Payment Mode", class: "block text-sm font-medium text-gray-700"
        = f.select :payment_mode, options_for_select([['Credit/Debit Card','CreditCard'], ['American Express','AmericanExpress']], @vendor&.payment_mode || 'CreditCard'),{},{ class: "w-full px-4 py-3 rounded-lg border border-gray-300 transition", style: "outline: none; border-color: #d1d5db;", onFocus: "this.style.borderColor='#3A6363'; this.style.boxShadow='0 0 0 3px rgba(58, 99, 99, 0.1)'", onBlur: "this.style.borderColor='#d1d5db'; this.style.boxShadow='none'" }

      .field.space-y-2
        = f.label :password, class: "block text-sm font-medium text-gray-700"
        .relative
          = f.password_field :password,
            autocomplete: "new-password",
            class: "w-full px-4 py-3 rounded-lg border border-gray-300 transition", style: "outline: none; border-color: #d1d5db;", onFocus: "this.style.borderColor='#3A6363'; this.style.boxShadow='0 0 0 3px rgba(58, 99, 99, 0.1)'", onBlur: "this.style.borderColor='#d1d5db'; this.style.boxShadow='none'",
            placeholder: "••••••••"
          %button.absolute.right-3.top-3.text-gray-400.transition{type: "button", onclick: "togglePassword(this)", style: "color: #9ca3af;", onMouseOver: "this.style.color='#3A6363'", onMouseOut: "this.style.color='#9ca3af'"}
            %i.fas.fa-eye

      .field.space-y-2
        = f.label :password_confirmation, class: "block text-sm font-medium text-gray-700"
        = f.password_field :password_confirmation,
          class: "w-full px-4 py-3 rounded-lg border border-gray-300 transition", style: "outline: none; border-color: #d1d5db;", onFocus: "this.style.borderColor='#3A6363'; this.style.boxShadow='0 0 0 3px rgba(58, 99, 99, 0.1)'", onBlur: "this.style.borderColor='#d1d5db'; this.style.boxShadow='none'",
          placeholder: "Confirm password"

      .field.flex.items-center
        = f.check_box :terms_accepted, required: true, id: "vendor_agree_terms", class: "h-4 w-4 border-gray-300 rounded transition", style: "color: #3a6363; accent-color: #3a6363"
        = f.label :terms_accepted, class: "ml-2 block text-sm text-gray-700" do
          | I agree to the
          %a.font-medium.transition-colors.hover:underline{href: "#", onclick: "openVendorTermsModal(); return false;", tabindex: 0, role: "button", style: "color: #3a6363"} B2B Partnership Agreement

      .field
        = hidden_field_tag :invite_token, params[:token] || @invited_vendor&.invite_token

      .actions
        = f.submit "Create Account",
          class: "w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-base font-bold text-white transition",
          style: "background-color: #3A6363;",
          onMouseOver: "this.style.backgroundColor='#2d4d4d'",
          onMouseOut: "this.style.backgroundColor='#3A6363'"

  / Vendor Terms & Conditions Modal - Larger size with scrollable content
  #vendor-terms-modal.fixed.inset-0.z-50.flex.items-center.justify-center.bg-black.bg-opacity-50{style: "display:none"}
    .bg-white.rounded-xl.shadow-2xl{class: "w-11/12 max-w-4xl h-5/6 p-4 relative flex flex-col"}
      / Header
      .flex.items-center.justify-between.pb-4.border-b.border-gray-200
        %h3.text-2xl.font-bold.text-gray-800 B2B Partnership Agreement
        %button.text-gray-400.hover:text-gray-600.text-3xl.font-bold.bg-transparent.border-0.transition{type: "button", onclick: "closeVendorTermsModal()", title: "Close"} ×
      
      / Content Area with Scroll
      .flex-1.overflow-y-auto.px-2.py-4.custom-scrollbar
        = render 'shared/vendor_terms_and_conditions_content'
      
      / Footer with Action Button
      .pt-4.border-t.border-gray-200
        .flex.justify-end.space-x-3
          %button.text-gray-600.font-semibold.py-2.px-4.rounded-lg.border.border-gray-300.hover:bg-gray-50.transition{type: "button", onclick: "closeVendorTermsModal()"} Cancel
          %button.text-white.font-semibold.py-2.px-6.rounded-lg.shadow-md.transition.duration-200.hover:shadow-lg{type: "button", onclick: "acceptVendorTerms()", style: "background-color: #3a6363; hover:background-color: #2d4d4d"} I Accept Agreement

:css
  / Custom scrollbar styling for vendor terms modal
  .custom-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: #3a6363 #f1f5f9;
  }
  
  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
  }
  
  .custom-scrollbar::-webkit-scrollbar-track {
    background: #f1f5f9;
    border-radius: 3px;
  }
  
  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: #3a6363;
    border-radius: 3px;
  }
  
  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: #2d4d4d;
  }

  / Ensure bullet points are visible in vendor terms modal
  #vendor-terms-modal .text-gray-700 ul,
  #vendor-terms-modal ul.text-gray-700 {
    list-style-type: disc !important;
    padding-left: 1.5rem !important;
    margin-left: 0.5rem !important;
    list-style-position: outside !important;
  }
  
  #vendor-terms-modal li {
    display: list-item !important;
    margin-bottom: 0.5rem !important;
    padding-left: 0.25rem !important;
  }
  
  / Override any Tailwind CSS resets
  #vendor-terms-modal ul[class*="text-gray"] {
    list-style-type: disc !important;
  }

:javascript
  function togglePassword(button) {
    const input = button.previousElementSibling
    const icon = button.querySelector('i')
    if (input.type === 'password') {
      input.type = 'text'
      icon.classList.replace('fa-eye', 'fa-eye-slash')
    } else {
      input.type = 'password'
      icon.classList.replace('fa-eye-slash', 'fa-eye')
    }
  }

  function openVendorTermsModal() {
    console.log('Opening vendor terms modal...'); // Debug line
    document.getElementById('vendor-terms-modal').style.display = 'flex';
  }
  
  function closeVendorTermsModal() {
    document.getElementById('vendor-terms-modal').style.display = 'none';
  }
  
  function acceptVendorTerms() {
    // Check the terms checkbox if it exists
    const checkbox = document.getElementById('vendor_agree_terms')
    if (checkbox) {
      checkbox.checked = true
    }
    
    // Close the modal
    closeVendorTermsModal()
    
    // Optional: Show a confirmation message
    const termsLink = document.querySelector('[onclick="openVendorTermsModal()"]')
    if (termsLink) {
      termsLink.style.color = '#3a6363'
      termsLink.textContent = termsLink.textContent.replace('B2B Partnership Agreement', '✓ B2B Partnership Agreement')
    }
  } 