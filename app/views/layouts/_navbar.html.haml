%nav.bg-white.shadow-lg.border-b.border-gray-100
  .max-w-7xl.mx-auto.px-4.sm:px-6.lg:px-8
    .flex.justify-between.items-center.h-16
      / Logo
      .flex.items-center
        = link_to root_path, class: 'flex items-center space-x-2' do
          %i{class: 'fas fa-car text-2xl', style: 'color: #3a6363'}
          %span.text-xl.font-bold.text-gray-900 WheelsOnRent
      
      / Desktop Navigation
      .hidden.md:flex.items-center.space-x-8
        - unless user_signed_in? || vendor_signed_in?
          = link_to 'Home', root_path, class: 'text-gray-700 font-medium transition navbar-link'
          = link_to 'Browse Cars', cars_path, class: 'text-gray-700 font-medium transition navbar-link'
          = link_to 'Car with Driver', cars_path(with_driver: 'true'), class: 'text-gray-700 font-medium transition navbar-link'
          = link_to 'About Us', '#', class: 'text-gray-700 font-medium transition navbar-link'
          = link_to 'Contact', '#', class: 'text-gray-700 font-medium transition navbar-link'
        
        .flex.items-center.space-x-3
          - if user_signed_in?
            / User dropdown menu (existing code)
            .relative
              %button#user-menu-button.flex.items-center.space-x-3.px-4.py-2.rounded-xl.hover:bg-gray-50.transition-all.duration-200{type: "button", onclick: "toggleUserMenu()"}
                .w-9.h-9.rounded-full.flex.items-center.justify-center.shadow-sm{style: 'background: linear-gradient(135deg, #3a6363, #2d4d4d)'}
                  %span.text-white.font-bold.text-sm= current_user.first_name&.first&.upcase || current_user.email.first.upcase
                .flex.flex-col.items-start
                  %span.text-sm.font-semibold.text-gray-900= current_user.first_name&.presence || current_user.email.split('@').first
                %svg.w-4.h-4.text-gray-400.ml-2{fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", "stroke-width" => "2"}
                  %path{"stroke-linecap" => "round", "stroke-linejoin" => "round", d: "M19 9l-7 7-7-7"}
              #user-dropdown.absolute.right-0.mt-2.w-56.bg-white.rounded-xl.shadow-xl.border.border-gray-100.hidden.z-50.overflow-hidden
                .px-4.py-3.border-b.border-gray-100{style: 'background: linear-gradient(135deg, #f0f4f4, #e8f0f0)'}
                  .flex.items-center.space-x-3
                    .w-10.h-10.rounded-full.flex.items-center.justify-center{style: 'background: linear-gradient(135deg, #3a6363, #2d4d4d)'}
                      %span.text-white.font-bold.text-sm= current_user.first_name&.first&.upcase || current_user.email.first.upcase
                    .flex-1
                      %p.text-sm.font-semibold.text-gray-900= current_user.first_name&.presence || current_user.email.split('@').first
                      %p.text-xs.text-gray-500= current_user.email
                .py-2
                  = link_to cars_path, class: "flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 transition-all duration-150" do
                    %i{class: 'fas fa-car mr-3 w-4', style: 'color: #3a6363'}
                    Browse Cars
                  = link_to user_home_path, class: "flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 transition-all duration-150" do
                    %i{class: 'fas fa-home mr-3 w-4', style: 'color: #3a6363'}
                    My Dashboard
                  = link_to users_documents_path, class: "flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 transition-all duration-150" do
                    %i{class: 'fas fa-file-upload mr-3 w-4', style: 'color: #3a6363'}
                    Documents
                  = link_to users_bookings_path, class: "flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 transition-all duration-150" do
                    %i{class: 'fas fa-calendar-check mr-3 w-4', style: 'color: #3a6363'}
                    Bookings
                  = link_to user_path(current_user), class: "flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 transition-all duration-150" do
                    %i{class: 'fas fa-user mr-3 w-4', style: 'color: #3a6363'}
                    Profile
                  .border-t.border-gray-100.my-1
                  = link_to destroy_user_session_path, method: :delete, data: { turbo_method: :delete }, class: "flex items-center px-4 py-3 text-sm text-red-600 hover:bg-red-50 transition-all duration-150" do
                    %i.fas.fa-sign-out-alt.mr-3.text-red-500.w-4
                    Sign Out
          
          - elsif vendor_signed_in?
            / Vendor dropdown menu (existing code)
            .relative
              %button#vendor-menu-button.flex.items-center.space-x-3.px-4.py-2.rounded-xl.hover:bg-gray-50.transition-all.duration-200{type: "button", onclick: "toggleVendorMenu()"}
                .w-9.h-9.rounded-full.flex.items-center.justify-center.shadow-sm{style: 'background: linear-gradient(135deg, #3a6363, #2d4d4d)'}
                  %span.text-white.font-bold.text-sm= current_vendor.first_name&.first&.upcase || current_vendor.email.first.upcase
                .flex.flex-col.items-start
                  %span.text-sm.font-semibold.text-gray-900= current_vendor.first_name&.presence || current_vendor.email.split('@').first
                %svg.w-4.h-4.text-gray-400.ml-2{fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", "stroke-width" => "2"}
                  %path{"stroke-linecap" => "round", "stroke-linejoin" => "round", d: "M19 9l-7 7-7-7"}
              #vendor-dropdown.absolute.right-0.mt-2.w-56.bg-white.rounded-xl.shadow-xl.border.border-gray-100.hidden.z-50.overflow-hidden
                .px-4.py-3.border-b.border-gray-100{style: 'background: linear-gradient(135deg, #f0f4f4, #e8f0f0)'}
                  .flex.items-center.space-x-3
                    .w-10.h-10.rounded-full.flex.items-center.justify-center{style: 'background: linear-gradient(135deg, #3a6363, #2d4d4d)'}
                      %span.text-white.font-bold.text-sm= current_vendor.first_name&.first&.upcase || current_vendor.email.first.upcase
                    .flex-1
                      %p.text-sm.font-semibold.text-gray-900= current_vendor.first_name&.presence || current_vendor.email.split('@').first
                      %p.text-xs.text-gray-500= current_vendor.email
                .py-2
                  = link_to vendors_dashboard_path, class: "flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 transition-all duration-150" do
                    %i{class: 'fas fa-tachometer-alt mr-3 w-4', style: 'color: #3a6363'}
                    Dashboard
                  = link_to vendor_path(current_vendor), class: "flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 transition-all duration-150" do
                    %i{class: 'fas fa-user mr-3 w-4', style: 'color: #3a6363'}
                    Profile
                  .border-t.border-gray-100.my-1
                  = link_to destroy_vendor_session_path, method: :delete, data: { turbo_method: :delete }, class: "flex items-center px-4 py-3 text-sm text-red-600 hover:bg-red-50 transition-all duration-150" do
                    %i.fas.fa-sign-out-alt.mr-3.text-red-500.w-4
                    Sign Out
          
          - else
            / Login dropdown with hover
            .relative.group
              %button.flex.items-center.space-x-2.text-gray-700.font-medium.transition.duration-200.hover:text-gray-900{type: "button"}
                %i.fas.fa-user.text-sm
                %span Login
                %svg.w-4.h-4.text-gray-400.ml-1.transform.group-hover:rotate-180.transition-transform.duration-200{fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", "stroke-width" => "2"}
                  %path{"stroke-linecap" => "round", "stroke-linejoin" => "round", d: "M19 9l-7 7-7-7"}
              .absolute.right-0.mt-2.w-48.bg-white.rounded-xl.shadow-xl.border.border-gray-100.opacity-0.invisible.group-hover:opacity-100.group-hover:visible.transition-all.duration-200.z-50.overflow-hidden
                .py-2
                  = link_to new_user_session_path, class: "flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 transition-all duration-150" do
                    %i{class: 'fas fa-user mr-3 w-4', style: 'color: #3a6363'}
                    Login as Customer
                  = link_to new_vendor_session_path, class: "flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 transition-all duration-150" do
                    %i{class: 'fas fa-store mr-3 w-4', style: 'color: #3a6363'}
                    Login as Vendor

            / Sign Up dropdown with hover
            .relative.group
              %button.text-white.px-4.py-2.rounded-lg.font-medium.transition.duration-200.hover:shadow-md.flex.items-center.space-x-2{style: 'background-color: #3a6363', type: "button"}
                %span Sign Up
                %svg.w-4.h-4.text-white.ml-1.transform.group-hover:rotate-180.transition-transform.duration-200{fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", "stroke-width" => "2"}
                  %path{"stroke-linecap" => "round", "stroke-linejoin" => "round", d: "M19 9l-7 7-7-7"}
              .absolute.right-0.mt-2.w-52.bg-white.rounded-xl.shadow-xl.border.border-gray-100.opacity-0.invisible.group-hover:opacity-100.group-hover:visible.transition-all.duration-200.z-50.overflow-hidden
                .py-2
                  = link_to new_user_registration_path, class: "flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 transition-all duration-150" do
                    %i{class: 'fas fa-user-plus mr-3 w-4', style: 'color: #3a6363'}
                    Sign Up as Customer
                  = link_to new_vendor_registration_path, class: "flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 transition-all duration-150" do
                    %i{class: 'fas fa-building mr-3 w-4', style: 'color: #3a6363'}
                    Sign Up as Vendor
      
      / Mobile menu button
      .md:hidden
        %button#mobile-menu-button{class: 'text-gray-700 transition mobile-menu-button', type: 'button', 'aria-label' => 'Toggle mobile menu'}
          %i{class: 'fas fa-bars text-xl'}

  / Mobile Navigation Menu
  .md:hidden#mobile-menu.hidden
    .px-2.pt-2.pb-3.space-y-1.sm:px-3.bg-white.border-t.border-gray-100
      - if user_signed_in?
        / User mobile menu (existing code)
        .px-3.py-2.border-b.border-gray-200.mb-4
          .flex.items-center.space-x-3.mb-3
            .w-10.h-10.rounded-full.flex.items-center.justify-center{style: 'background: linear-gradient(135deg, #3a6363, #2d4d4d)'}
              %span.text-white.font-bold.text-sm= current_user.first_name&.first&.upcase || current_user.email.first.upcase
            .flex-1
              %p.text-sm.font-semibold.text-gray-900= current_user.first_name&.presence || current_user.email.split('@').first
              %p.text-xs.text-gray-500= current_user.email
        = link_to cars_path, class: 'flex items-center px-3 py-2 text-gray-700 hover:bg-gray-50 font-medium transition rounded-md navbar-link' do
          %i{class: 'fas fa-car mr-3 w-4', style: 'color: #3a6363'}
          Browse Cars
        = link_to user_home_path, class: 'flex items-center px-3 py-2 text-gray-700 hover:bg-gray-50 font-medium transition rounded-md navbar-link' do
          %i{class: 'fas fa-home mr-3 w-4', style: 'color: #3a6363'}
          My Dashboard
        = link_to users_documents_path, class: 'flex items-center px-3 py-2 text-gray-700 hover:bg-gray-50 font-medium transition rounded-md navbar-link' do
          %i{class: 'fas fa-file-upload mr-3 w-4', style: 'color: #3a6363'}
          Documents
        = link_to users_bookings_path, class: 'flex items-center px-3 py-2 text-gray-700 hover:bg-gray-50 font-medium transition rounded-md navbar-link' do
          %i{class: 'fas fa-calendar-check mr-3 w-4', style: 'color: #3a6363'}
          Bookings
        = link_to user_path(current_user), class: 'flex items-center px-3 py-2 text-gray-700 hover:bg-gray-50 font-medium transition rounded-md navbar-link' do
          %i{class: 'fas fa-user mr-3 w-4', style: 'color: #3a6363'}
          Profile
        .border-t.border-gray-200.pt-4
        = link_to destroy_user_session_path, method: :delete, data: { turbo_method: :delete }, class: 'flex items-center px-3 py-2 text-red-600 hover:bg-red-50 font-medium transition rounded-md' do
          %i.fas.fa-sign-out-alt.mr-3.text-red-500.w-4
          Sign Out
      
      - elsif vendor_signed_in?
        / Vendor mobile menu (existing code)
        .px-3.py-2.border-b.border-gray-200.mb-4
          .flex.items-center.space-x-3.mb-3
            .w-10.h-10.rounded-full.flex.items-center.justify-center{style: 'background: linear-gradient(135deg, #3a6363, #2d4d4d)'}
              %span.text-white.font-bold.text-sm= current_vendor.first_name&.first&.upcase || current_vendor.email.first.upcase
            .flex-1
              %p.text-sm.font-semibold.text-gray-900= current_vendor.first_name&.presence || current_vendor.email.split('@').first
              %p.text-xs.text-gray-500= current_vendor.email
        = link_to vendors_dashboard_path, class: 'flex items-center px-3 py-2 text-gray-700 hover:bg-gray-50 font-medium transition rounded-md navbar-link' do
          %i{class: 'fas fa-tachometer-alt mr-3 w-4', style: 'color: #3a6363'}
          Dashboard
        = link_to vendor_path(current_vendor), class: 'flex items-center px-3 py-2 text-gray-700 hover:bg-gray-50 font-medium transition rounded-md navbar-link' do
          %i{class: 'fas fa-user mr-3 w-4', style: 'color: #3a6363'}
          Profile
        .border-t.border-gray-200.pt-4
        = link_to destroy_vendor_session_path, method: :delete, data: { turbo_method: :delete }, class: 'flex items-center px-3 py-2 text-red-600 hover:bg-red-50 font-medium transition rounded-md' do
          %i.fas.fa-sign-out-alt.mr-3.text-red-500.w-4
          Sign Out
      
      - else
        / Unauthenticated mobile menu
        = link_to 'Home', root_path, class: 'block px-3 py-2 text-gray-700 hover:bg-gray-50 font-medium transition rounded-md navbar-link'
        = link_to 'Browse Cars', cars_path, class: 'block px-3 py-2 text-gray-700 hover:bg-gray-50 font-medium transition rounded-md navbar-link'
        = link_to 'Car with Driver', cars_path(with_driver: 'true'), class: 'block px-3 py-2 text-gray-700 hover:bg-gray-50 font-medium transition rounded-md navbar-link'
        = link_to 'About Us', '#', class: 'block px-3 py-2 text-gray-700 hover:bg-gray-50 font-medium transition rounded-md navbar-link'
        = link_to 'Contact', '#', class: 'block px-3 py-2 text-gray-700 hover:bg-gray-50 font-medium transition rounded-md navbar-link'
        .border-t.border-gray-200.pt-4
          .px-3.py-2
            %p.text-sm.font-semibold.text-gray-500.mb-2 Login
            = link_to new_user_session_path, class: 'flex items-center px-3 py-2 text-gray-700 hover:bg-gray-50 font-medium transition rounded-md navbar-link mb-1' do
              %i{class: 'fas fa-user mr-3 w-4', style: 'color: #3a6363'}
              Login as Customer
            = link_to new_vendor_session_path, class: 'flex items-center px-3 py-2 text-gray-700 hover:bg-gray-50 font-medium transition rounded-md navbar-link mb-3' do
              %i{class: 'fas fa-store mr-3 w-4', style: 'color: #3a6363'}
              Login as Vendor
            %p.text-sm.font-semibold.text-gray-500.mb-2 Sign Up
            = link_to new_user_registration_path, class: 'flex items-center px-3 py-2 text-gray-700 hover:bg-gray-50 font-medium transition rounded-md navbar-link mb-1' do
              %i{class: 'fas fa-user-plus mr-3 w-4', style: 'color: #3a6363'}
              Sign Up as Customer
            = link_to new_vendor_registration_path, class: 'flex items-center px-3 py-2 text-gray-700 hover:bg-gray-50 font-medium transition rounded-md navbar-link mb-3' do
              %i{class: 'fas fa-building mr-3 w-4', style: 'color: #3a6363'}
              Sign Up as Vendor

:javascript
  // Mobile menu toggle
  document.addEventListener('DOMContentLoaded', function() {
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    
    if (mobileMenuButton && mobileMenu) {
      mobileMenuButton.addEventListener('click', function() {
        mobileMenu.classList.toggle('hidden');
      });
    }
  });

  // Dropdown toggle functions for authenticated users
  function toggleUserMenu() {
    const dropdown = document.getElementById('user-dropdown');
    dropdown.classList.toggle('hidden');
  }

  function toggleVendorMenu() {
    const dropdown = document.getElementById('vendor-dropdown');
    dropdown.classList.toggle('hidden');
  }

  // Close dropdowns when clicking outside (for authenticated user menus only)
  document.addEventListener('click', function(event) {
    const userDropdown = document.getElementById('user-dropdown');
    const userButton = document.getElementById('user-menu-button');
    const vendorDropdown = document.getElementById('vendor-dropdown');
    const vendorButton = document.getElementById('vendor-menu-button');

    if (userDropdown && userButton && !userButton.contains(event.target) && !userDropdown.contains(event.target)) {
      userDropdown.classList.add('hidden');
    }
    if (vendorDropdown && vendorButton && !vendorButton.contains(event.target) && !vendorDropdown.contains(event.target)) {
      vendorDropdown.classList.add('hidden');
    }
  });