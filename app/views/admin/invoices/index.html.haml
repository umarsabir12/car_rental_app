.container-fluid.px-4.sm:px-6.lg:px-8.py-6.sm:py-8
  .bg-white.shadow-lg.rounded-xl.overflow-hidden.p-4.sm:p-6.lg:p-8
    / Header Section
    .flex.flex-col.sm:flex-row.sm:justify-between.sm:items-center.mb-4.sm:mb-6.gap-3
      %div
        %h1.text-2xl.sm:text-3xl.font-extrabold{style: "color: #3A6363;"} Invoice History
        %p.text-sm.sm:text-base.text-gray-600.mt-1= "Invoices for #{@vendor.company_name}"

    / Summary Cards
    .grid.grid-cols-1.sm:grid-cols-2.md:grid-cols-3.gap-3.sm:gap-4.mb-4.sm:mb-6
      .rounded-lg.p-3.sm:p-4.border{style: "background: linear-gradient(to right, #e8f0f0, #f0f5f5); border-color: #3A6363;"}
        .flex.items-center.justify-between
          %div
            %p.text-xs.sm:text-sm.font-semibold.uppercase{style: "color: #3A6363;"} Total Invoices
            %p.text-2xl.sm:text-3xl.font-bold.text-gray-900= @vendor.invoices.count
          %i.fas.fa-file-invoice.text-3xl.sm:text-4xl{style: "color: #d1e0e0;"}

      .bg-gradient-to-r.from-amber-50.to-amber-100.rounded-lg.p-3.sm:p-4.border.border-amber-200
        .flex.items-center.justify-between
          %div
            %p.text-xs.sm:text-sm.font-semibold.text-amber-600.uppercase Pending Amount
            %p.text-2xl.sm:text-3xl.font-bold.text-amber-900= number_to_currency(@vendor.total_pending_amount)
          %i.fas.fa-clock.text-3xl.sm:text-4xl.text-amber-300

      .bg-gradient-to-r.from-emerald-50.to-emerald-100.rounded-lg.p-3.sm:p-4.border.border-emerald-200
        .flex.items-center.justify-between
          %div
            %p.text-xs.sm:text-sm.font-semibold.text-emerald-600.uppercase Paid Amount
            %p.text-2xl.sm:text-3xl.font-bold.text-emerald-900= number_to_currency(@vendor.total_paid_amount)
          %i.fas.fa-check-circle.text-3xl.sm:text-4xl.text-emerald-300

    / Invoices Section
    - if @invoices.any?
      / Mobile Card View - Hidden on Desktop
      .block.md:hidden.space-y-3.sm:space-y-4.mb-6
        - @invoices.each do |invoice|
          .bg-white.rounded-lg.shadow-md.p-3.sm:p-4.border-l-4{style: "border-color: #3A6363;"}
            .flex.justify-between.items-start.mb-3
              %div
                %code.text-xs.sm:text-sm.font-mono.bg-gray-100.px-2.py-1.rounded= "Invoice ##{invoice.id}"
                %p.text-xs.text-gray-500.mt-1
                  = invoice.created_at.strftime('%b %d, %Y')
                  â€¢
                  = invoice.created_at.strftime('%I:%M %p')
              = link_to admin_invoice_path(invoice), class: 'text-white px-3 py-1.5 rounded-md text-xs sm:text-sm', style: 'background-color: #3A6363;' do
                %i.fas.fa-eye

            .space-y-2
              .flex.justify-between.items-center.py-2.border-b.border-gray-100
                %span.text-xs.font-medium.text-gray-500 Items
                %span.inline-flex.items-center.px-2.py-1.rounded-full.text-xs.font-medium{style: "background-color: #d1e0e0; color: #3A6363;"}
                  %i.fas.fa-list.mr-1
                  = invoice.invoice_items.count
                  = "item".pluralize(invoice.invoice_items.count)

              .flex.justify-between.items-center.py-2.border-b.border-gray-100
                %span.text-xs.font-medium.text-gray-500 Total Amount
                %span.text-sm.font-bold.text-gray-900= number_to_currency(invoice.invoice_items.sum(:amount))

              .flex.justify-between.items-center.py-2
                %span.text-xs.font-medium.text-gray-500 Status
                %div
                  - case invoice.payment_status
                  - when 'paid'
                    %span.inline-flex.items-center.px-2.py-1.rounded-full.text-xs.font-medium.bg-green-100.text-green-800
                      %i.fas.fa-check-circle.mr-1
                      Paid
                  - when 'pending'
                    %span.inline-flex.items-center.px-2.py-1.rounded-full.text-xs.font-medium.bg-yellow-100.text-yellow-800
                      %i.fas.fa-clock.mr-1
                      Pending
                  - when 'overdue'
                    %span.inline-flex.items-center.px-2.py-1.rounded-full.text-xs.font-medium.bg-red-100.text-red-800
                      %i.fas.fa-exclamation-circle.mr-1
                      Overdue
                  - when 'cancelled'
                    %span.inline-flex.items-center.px-2.py-1.rounded-full.text-xs.font-medium.bg-gray-100.text-gray-800
                      %i.fas.fa-ban.mr-1
                      Cancelled

      / Desktop Table View - Hidden on Mobile
      .bg-white.rounded-lg.shadow.overflow-hidden.hidden.md:block
        .overflow-x-auto
          %table.min-w-full.divide-y.divide-gray-200
            %thead{style: "background-color: #e8f0f0;"}
              %tr
                %th.px-6.py-3.text-left.text-xs.font-medium.uppercase.tracking-wider{style: "color: #3A6363;"} Invoice #
                %th.px-6.py-3.text-left.text-xs.font-medium.uppercase.tracking-wider{style: "color: #3A6363;"} Items
                %th.px-6.py-3.text-left.text-xs.font-medium.uppercase.tracking-wider{style: "color: #3A6363;"} Total Amount
                %th.px-6.py-3.text-left.text-xs.font-medium.uppercase.tracking-wider{style: "color: #3A6363;"} Created Date
                %th.px-6.py-3.text-left.text-xs.font-medium.uppercase.tracking-wider{style: "color: #3A6363;"} Status
                %th.px-6.py-3.text-left.text-xs.font-medium.uppercase.tracking-wider{style: "color: #3A6363;"} Actions
            %tbody.bg-white.divide-y.divide-gray-200
              - @invoices.each do |invoice|
                %tr.transition-colors{style: "transition: background-color 0.2s;", onmouseover: "this.style.backgroundColor='#e8f0f0'", onmouseout: "this.style.backgroundColor='white'"}
                  %td.px-6.py-4.whitespace-nowrap
                    %code.text-sm.font-mono.bg-gray-100.px-2.py-1.rounded= invoice.id
                  %td.px-6.py-4.whitespace-nowrap
                    %span.inline-flex.items-center.px-2.5.py-0.5.rounded-full.text-xs.font-medium{style: "background-color: #d1e0e0; color: #3A6363;"}
                      %i.fas.fa-list.mr-1
                      = invoice.invoice_items.count
                      = "item".pluralize(invoice.invoice_items.count)
                  %td.px-6.py-4.whitespace-nowrap
                    .text-sm.font-bold.text-gray-900= number_to_currency(invoice.invoice_items.sum(:amount))
                  %td.px-6.py-4.whitespace-nowrap
                    .text-sm.text-gray-900= invoice.created_at.strftime('%b %d, %Y')
                    .text-xs.text-gray-500= invoice.created_at.strftime('%I:%M %p')
                  %td.px-6.py-4.whitespace-nowrap
                    - case invoice.payment_status
                    - when 'paid'
                      %span.inline-flex.items-center.px-2.5.py-0.5.rounded-full.text-xs.font-medium.bg-green-100.text-green-800
                        %i.fas.fa-check-circle.mr-1
                        Paid
                    - when 'pending'
                      %span.inline-flex.items-center.px-2.5.py-0.5.rounded-full.text-xs.font-medium.bg-yellow-100.text-yellow-800
                        %i.fas.fa-clock.mr-1
                        Pending
                    - when 'overdue'
                      %span.inline-flex.items-center.px-2.5.py-0.5.rounded-full.text-xs.font-medium.bg-red-100.text-red-800
                        %i.fas.fa-exclamation-circle.mr-1
                        Overdue
                    - when 'cancelled'
                      %span.inline-flex.items-center.px-2.5.py-0.5.rounded-full.text-xs.font-medium.bg-gray-100.text-gray-800
                        %i.fas.fa-ban.mr-1
                        Cancelled
                  %td.px-6.py-4.whitespace-nowrap.text-sm.font-medium
                    .flex.gap-2
                      = link_to admin_invoice_path(invoice), class: 'inline-flex items-center px-3 py-1.5 text-white text-xs font-medium rounded transition-colors', style: 'background-color: #3A6363;', onmouseover: "this.style.backgroundColor='#2d4d4d'", onmouseout: "this.style.backgroundColor='#3A6363'", title: 'View Invoice' do
                        %i.fas.fa-eye.mr-1
                        View

    - else
      .bg-gray-50.rounded-lg.p-6.sm:p-8.text-center
        %i.fas.fa-file-invoice.text-5xl.sm:text-6xl.text-gray-300.mb-3.sm:mb-4
        %h3.text-lg.sm:text-xl.font-semibold.text-gray-700.mb-2 No Invoices Yet
        %p.text-sm.sm:text-base.text-gray-500.mb-4 This vendor doesn't have any invoices yet.

    / Back Button
    .mt-4.sm:mt-6
      = link_to admin_vendor_path(@vendor), class: 'inline-flex items-center px-4 py-2 text-white font-medium rounded-lg transition-colors duration-200 gap-2 text-sm sm:text-base', style: 'background-color: #3A6363;', onmouseover: "this.style.backgroundColor='#2d4d4d'", onmouseout: "this.style.backgroundColor='#3A6363'" do
        %i.fas.fa-arrow-left
        %span Back to Vendor
