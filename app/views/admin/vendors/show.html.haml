-# Vendor show page
.container.mx-auto.px-4.py-8
  .bg-white.shadow-lg.rounded-xl.overflow-hidden.p-8
    .mb-6
      %h1.text-3xl.font-extrabold.text-blue-900 Vendor Details

    / Main Content: Vendor Info + Trade License
    .flex.flex-col.lg:flex-row.gap-8
      / Left Side - Vendor Information
      .flex-1
        / Company Name
        %h1.text-3xl.font-bold.text-gray-800.mb-4= @vendor.company_name
        
        / Vendor Details with Icons
        .space-y-3
          / Contact Person
          .flex.items-start
            %i.fas.fa-user.text-blue-600.w-6.mt-1
            .ml-3
              %p.text-xs.font-semibold.text-gray-500.uppercase Name
              %p.text-lg.text-gray-700= @vendor.name
          
          / Address
          - if @vendor.address.present?
            .flex.items-start
              %i.fas.fa-map-marker-alt.text-blue-600.w-6.mt-1
              .ml-3
                %p.text-xs.font-semibold.text-gray-500.uppercase Address
                %p.text-lg.text-gray-700= @vendor.address
          
          / Phone Number
          - if @vendor.phone.present?
            .flex.items-start
              %i.fas.fa-phone.text-blue-600.w-6.mt-1
              .ml-3
                %p.text-xs.font-semibold.text-gray-500.uppercase Phone Number
                %p.text-lg.text-gray-700= @vendor.phone
          
          / WhatsApp Number
          .flex.items-start
            %i.fab.fa-whatsapp.text-green-600.w-6.mt-1.text-xl
            .ml-3
              %p.text-xs.font-semibold.text-gray-500.uppercase.flex.items-center
                WhatsApp Number
              - if @vendor.whatsapp_number.present?
                .flex.items-center.gap-3
                  %p.text-lg.text-gray-700= @vendor.whatsapp_display || @vendor.whatsapp_number
                  = link_to @vendor.whatsapp_link, target: '_blank', class: 'inline-flex items-center gap-2 bg-green-500 hover:bg-green-600 text-white font-semibold px-3 py-1 rounded-lg transition-all duration-200 shadow-md hover:shadow-lg text-sm' do
                    %i.fab.fa-whatsapp
                    %span Chat
              - else
                %p.text-lg.text-gray-500.italic Not provided
          
          / Email
          .flex.items-start
            %i.fas.fa-envelope.text-blue-600.w-6.mt-1
            .ml-3
              %p.text-xs.font-semibold.text-gray-500.uppercase Email
              %p.text-lg.text-gray-700= @vendor.email
          
          / Website
          - if @vendor.website.present?
            .flex.items-start
              %i.fas.fa-globe.text-blue-600.w-6.mt-1
              .ml-3
                %p.text-xs.font-semibold.text-gray-500.uppercase Website
                = link_to @vendor.website, @vendor.website, target: '_blank', class: 'text-lg text-blue-600 hover:text-blue-800 hover:underline'
        
        / Description
        - if @vendor.description.present?
          .mt-6.p-4.bg-gray-50.rounded-lg.border.border-gray-200
            %p.text-xs.font-semibold.text-gray-500.uppercase.mb-2 Description
            %p.text-gray-700.leading-relaxed= @vendor.description

        / Action Buttons
        .flex.flex-wrap.gap-4.mt-8
          = button_tag type: 'button', class: 'inline-flex items-center px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors duration-200 shadow-md hover:shadow-lg gap-2' do
            %i.fas.fa-envelope
            %span Send Email
          
          = form_with url: admin_vendor_path(@vendor), method: :delete, class: 'inline-block' do |f|
            = f.submit 'Delete Vendor', 
                class: 'inline-flex items-center px-6 py-3 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg transition-colors duration-200 shadow-md hover:shadow-lg gap-2 cursor-pointer',
                onclick: "return confirm('Are you sure you want to delete #{@vendor.company_name}? This action can be undone by restoring the vendor.');"

      / Right Side - Trade License Card
      .flex-shrink-0.w-full.lg:w-96
        .bg-white.rounded-2xl.shadow-xl.border.border-gray-100.overflow-hidden.transition-all.duration-300
          / Header Section
          .bg-gradient-to-r.from-slate-50.to-gray-50.px-6.py-4.border-b.border-gray-100
            %h2.text-xl.font-bold.flex.items-center.gap-3{style: 'color:#3A6363'}
              .p-2.rounded-lg{style: 'background-color:#E6F0F0'}
                %i.fas.fa-id-card{style: 'color:#3A6363'}
              Trade License

          / Content Section  
          .p-6
            - if @vendor.vendor_document.present? && @vendor.vendor_document.trade_license.attached?
              .space-y-4
                / Document Preview
                .w-full.h-40.rounded-xl.overflow-hidden.bg-gradient-to-br.from-gray-50.to-gray-100.border-2.border-dashed.flex.items-center.justify-center.relative.group.transition-all.duration-300.hover:shadow-lg{style: 'border-color:#3A6363'}
                  - content_type = @vendor.vendor_document.trade_license.content_type.to_s
                  - if content_type.start_with?("image/")
                    = image_tag url_for(@vendor.vendor_document.trade_license.variant(resize_to_fill: [320, 160])), class: 'w-full h-full object-cover transition-transform duration-300 group-hover:scale-110'
                    .absolute.inset-0.bg-black.bg-opacity-0.group-hover:bg-opacity-20.transition-all.duration-300.flex.items-center.justify-center
                      %i.fas.fa-search-plus.text-white.opacity-0.group-hover:opacity-100.text-xl
                  - elsif content_type == 'application/pdf'
                    .text-center.space-y-2
                      %i.fas.fa-file-pdf.text-5xl.text-red-500
                      %span.text-sm.font-medium.text-gray-600 PDF Document
                  - else
                    .text-center.space-y-2
                      %i.fas.fa-file-alt.text-5xl.text-gray-400
                      %span.text-sm.font-medium.text-gray-600 Document
          
                / Action Buttons & Status
                .flex.flex-col.gap-3
                  / Download Button
                  = link_to url_for(@vendor.vendor_document.trade_license), target: '_blank', class: 'inline-flex items-center justify-center gap-2 px-4 py-2 text-white text-sm font-medium rounded-md transition-all duration-200 shadow hover:shadow-md w-full', style: 'background-color:#3A6363' do
                    %i.fas.fa-download
                    %span Download

                  / Show Button
                  - if @vendor.vendor_document.document_status == 'pending'
                    = link_to admin_document_path(@vendor.vendor_document, type: 'trade_license'), target: '_blank', class: 'inline-flex items-center justify-center gap-2 px-4 py-2 text-white text-sm font-medium rounded-md transition-all duration-200 shadow hover:shadow-md w-full', style: 'background-color:#3A6363' do
                      %i.fas.fa-eye
                      %span View
              
                  / Status Badge
                  - status = @vendor.vendor_document.document_status
                  - case status
                  - when 'approved'
                    - badge_classes = 'bg-emerald-50 text-emerald-700 border-emerald-200'
                    - icon_class = 'fas fa-check-circle text-emerald-600'
                  - when 'rejected'
                    - badge_classes = 'bg-red-50 text-red-700 border-red-200'
                    - icon_class = 'fas fa-times-circle text-red-600'
                  - when 'pending'
                    - badge_classes = 'bg-amber-50 text-amber-700 border-amber-200'
                    - icon_class = 'fas fa-clock text-amber-600'
                  - else
                    - badge_classes = 'bg-gray-50 text-gray-700 border-gray-200'
                    - icon_class = 'fas fa-question-circle text-gray-600'
              
                  .inline-flex.items-center.justify-center.gap-2.px-3.py-2.rounded-lg.text-sm.font-semibold.border-2.transition-all.duration-200.w-full{class: badge_classes}
                    %i{class: icon_class}
                    %span= status.to_s.titleize
        
            - else
              / Empty State
              .text-center.py-8.space-y-4
                .w-20.h-20.mx-auto.rounded-full.flex.items-center.justify-center{style: 'background-color:#E6F0F0'}
                  %i.fas.fa-file-plus.text-2xl{style: 'color:#3A6363'}
                .space-y-2
                  %h3.text-base.font-semibold.text-gray-800 No Trade License

  .mt-8
    %h2.text-2xl.font-bold.mb-4 Cars by this Vendor
    - if @vendor.cars.any?
      .grid.grid-cols-1.md:grid-cols-2.lg:grid-cols-3.gap-6
        - @vendor.cars.each do |car|
          .bg-white.rounded-lg.shadow.p-4.flex.flex-col
            / Car Image with Uniform Size
            .relative.h-40.bg-gray-100.rounded-lg.overflow-hidden.mb-3
              = car_main_image(car, size: [400, 300])
              
              / Status Badge
              .absolute.top-2.right-2
                - status_classes = {'available' => 'bg-blue-500 text-white','rented' => 'bg-red-500 text-white'}[car.booking_status] || 'bg-blue-500 text-white'
                %span.inline-block.rounded-full.text-xs.font-semibold.px-2.py-1{ class: status_classes }= car.booking_status
            
            %div.font-semibold.text-lg= "#{car.brand} #{car.model}"
            %div.text-gray-500= "#{car.year} • #{car.color} • #{car.transmission&.titleize}"
            -# %div.text-blue-700.font-bold.mt-2= number_to_currency(car.daily_price) + " / day"
            = link_to 'View Car', admin_car_path(car), class: 'mt-3 inline-block bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded shadow text-sm font-bold'
    - else
      %p.text-gray-500 No cars listed by this vendor yet.