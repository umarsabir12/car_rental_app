.container.mx-auto.px-4.sm:px-6.lg:px-8.py-6.sm:py-8
  .flex.flex-col.sm:flex-row.items-start.sm:items-center.justify-between.mb-6.sm:mb-8.gap-4
    %h1.text-2xl.sm:text-3xl.font-bold{style: "color: #3A6363;"} Discounts
    = link_to new_admin_discount_path, class: "inline-flex items-center px-4 py-2 rounded-md transition text-white text-sm sm:text-base shadow-md", style: "background-color: #3A6363;", onmouseover: "this.style.backgroundColor='#2d4d4d'", onmouseout: "this.style.backgroundColor='#3A6363'" do
      %i.fas.fa-plus.mr-2
      %span Add New Discount

  / Filters
  .bg-white.rounded-lg.shadow-md.p-4.sm:p-6.mb-6.sm:mb-8
    = form_with url: admin_discounts_path, method: :get, local: true, class: 'space-y-4' do |f|
      .grid.grid-cols-1.sm:grid-cols-2.md:grid-cols-4.gap-3.sm:gap-4
        .field
          = f.label :vendor_id, 'Vendor', class: 'block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2'
          = f.select :vendor_id, options_from_collection_for_select(Vendor.active.order(:company_name), :id, :company_name, params[:vendor_id]), { include_blank: 'All Vendors' }, class: 'w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:border-transparent', style: 'transition: all 0.2s;', onfocus: "this.style.borderColor='#3A6363'; this.style.boxShadow='0 0 0 3px rgba(58, 99, 99, 0.1)'", onblur: "this.style.borderColor='#d1d5db'; this.style.boxShadow='none'"

        .field
          = f.label :category, 'Category', class: 'block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2'
          = f.select :category, options_for_select(Car.distinct.pluck(:category).compact.sort, params[:category]), { include_blank: 'All Categories' }, class: 'w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:border-transparent', style: 'transition: all 0.2s;', onfocus: "this.style.borderColor='#3A6363'; this.style.boxShadow='0 0 0 3px rgba(58, 99, 99, 0.1)'", onblur: "this.style.borderColor='#d1d5db'; this.style.boxShadow='none'"

        .field
          = f.label :active, 'Status', class: 'block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2'
          = f.select :active, options_for_select([['All', ''], ['Active', 'true'], ['Inactive', 'false']], params[:active]), {}, class: 'w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:border-transparent', style: 'transition: all 0.2s;', onfocus: "this.style.borderColor='#3A6363'; this.style.boxShadow='0 0 0 3px rgba(58, 99, 99, 0.1)'", onblur: "this.style.borderColor='#d1d5db'; this.style.boxShadow='none'"

        .field.flex.items-end.gap-2.col-span-1.sm:col-span-2.md:col-span-1
          = f.submit 'Filter', class: 'flex-1 sm:flex-none px-4 py-2 text-white rounded-md transition text-sm shadow-md text-center', style: 'background-color: #3A6363;', onmouseover: "this.style.backgroundColor='#2d4d4d'", onmouseout: "this.style.backgroundColor='#3A6363'"
          = link_to 'Clear', admin_discounts_path, class: 'flex-1 sm:flex-none bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-md transition text-sm shadow-md text-center'

  / Mobile Card View - Hidden on Desktop
  .block.md:hidden.space-y-4.mb-6
    - @discounts.each_with_index do |discount, index|
      .bg-white.rounded-lg.shadow-md.p-4.border-l-4{style: "border-color: #3A6363;"}
        .flex.justify-between.items-start.mb-3
          %div
            %h3.text-lg.font-bold.text-gray-900
              = discount.vendor_display
            %p.text-sm.text-gray-600
              = discount.category_list
          .flex.gap-2
            = link_to edit_admin_discount_path(discount), class: 'text-white px-3 py-1.5 rounded-md text-sm', style: 'background-color: #3A6363;' do
              %i.fas.fa-edit
            = button_to admin_discount_path(discount.id), method: :delete, data: { turbo_confirm: 'Are you sure you want to delete this discount?' }, class: 'bg-red-500 hover:bg-red-600 text-white px-3 py-1.5 rounded-md text-sm' do
              %i.fas.fa-trash

        .space-y-2
          .flex.justify-between.items-center.py-2.border-b.border-gray-100
            %span.text-xs.font-medium.text-gray-500 Discount
            %span.text-sm.text-gray-900.font-bold
              = "#{discount.discount_percentage.round}%"

          .flex.justify-between.items-center.py-2
            %span.text-xs.font-medium.text-gray-500 Status
            %div
              - status = discount.active? ? 'Active' : 'Inactive'
              %span.inline-flex.items-center.px-2.py-1.rounded-full.text-xs.font-medium{class: status == 'Active' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}
                = status

  / Desktop Table View - Hidden on Mobile
  .bg-white.rounded-lg.shadow-md.overflow-hidden.hidden.md:block
    .overflow-x-auto
      %table.min-w-full.divide-y.divide-gray-200
        %thead{style: "background-color: #e8f0f0;"}
          %tr
            %th.px-6.py-3.text-left.text-xs.font-medium.uppercase.tracking-wider{style: "color: #3A6363;"} #
            %th.px-6.py-3.text-left.text-xs.font-medium.uppercase.tracking-wider{style: "color: #3A6363;"} Vendor
            %th.px-6.py-3.text-left.text-xs.font-medium.uppercase.tracking-wider{style: "color: #3A6363;"} Category
            %th.px-6.py-3.text-left.text-xs.font-medium.uppercase.tracking-wider{style: "color: #3A6363;"} Discount %
            %th.px-6.py-3.text-left.text-xs.font-medium.uppercase.tracking-wider{style: "color: #3A6363;"} Status
            %th.px-6.py-3.text-left.text-xs.font-medium.uppercase.tracking-wider{style: "color: #3A6363;"} Actions
        %tbody.bg-white.divide-y.divide-gray-200
          - @discounts.each_with_index do |discount, index|
            %tr.transition-colors{style: "transition: background-color 0.2s;", onmouseover: "this.style.backgroundColor='#e8f0f0'", onmouseout: "this.style.backgroundColor='white'"}
              %td.px-6.py-4.whitespace-nowrap.text-sm.font-medium.text-gray-900= index + 1
              %td.px-6.py-4.whitespace-nowrap.text-sm.text-gray-900
                %span.font-medium= discount.vendor_display
              %td.px-6.py-4.text-sm.text-gray-900
                - if discount.applies_to_all_categories?
                  %span.inline-flex.items-center.px-2.5.py-0.5.rounded-full.text-xs.font-medium.bg-purple-100.text-purple-800
                    All Categories
                - else
                  .flex.flex-wrap.gap-1
                    - discount.category.each do |cat|
                      %span.inline-flex.items-center.px-2.5.py-0.5.rounded-full.text-xs.font-medium.bg-blue-100.text-blue-800
                        = cat
              %td.px-6.py-4.whitespace-nowrap.text-sm.text-gray-900
                %span.font-bold.text-lg{style: "color: #3A6363;"}
                  = "#{discount.discount_percentage.round}%"
              %td.px-6.py-4.whitespace-nowrap
                - status = discount.active? ? 'Active' : 'Inactive'
                %span.inline-flex.items-center.px-2.5.py-0.5.rounded-full.text-xs.font-medium{class: status == 'Active' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}
                  = status
              %td.px-6.py-4.whitespace-nowrap.text-sm.font-medium
                .flex.gap-3.items-center
                  = link_to edit_admin_discount_path(discount), class: 'transition-colors', style: 'color: #3A6363;', onmouseover: "this.style.color='#2d4d4d'", onmouseout: "this.style.color='#3A6363'" do
                    %i.fas.fa-edit
                  = button_to admin_discount_path(discount.id), method: :delete, data: { turbo_confirm: 'Are you sure you want to delete this discount?' }, class: 'text-red-600 hover:text-red-900 p-0 bg-transparent border-0' do
                    %i.fas.fa-trash

  - if @discounts.empty?
    .text-center.py-12
      .text-gray-500
        %i.fas.fa-tag.text-3xl.sm:text-4xl.mb-4
        %p.text-base.sm:text-lg.font-medium No discounts found
        %p.text-xs.sm:text-sm Try adjusting your filters or create a new discount
