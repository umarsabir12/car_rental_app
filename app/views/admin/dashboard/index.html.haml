%div.max-w-5xl.mx-auto.mt-10
  %div.mb-8
    %h1.text-2xl.font-bold.text-blue-900.mb-2 Overview
    %p.text-gray-600 Here is a summary of your platform activity.
  %div.grid.grid-cols-1.md:grid-cols-4.gap-6.mb-10
    - @stats.each do |label, value|
      %div.bg-white.rounded-xl.shadow.p-6.text-center.border-t-4.border-blue-900
        %div.text-3xl.font-bold.text-blue-900.mb-1
          = value
        %div.text-gray-600.font-semibold
          = label.to_s.titleize

  / Activity Tracker Section
  .bg-white.rounded-xl.shadow.p-8.mb-10
    .flex.items-center.justify-between.mb-6
      %h2.text-xl.font-bold.text-blue-900 Activity Tracker
      = link_to admin_activities_path, class: 'inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700' do
        %i.fas.fa-chart-line.mr-2
        View All Activities
    
    - recent_activities = Activity.includes(:user, :subject).recent.limit(10)
    - if recent_activities.any?
      .space-y-4
        - recent_activities.each do |activity|
          .flex.items-start.space-x-4.p-4.bg-gray-50.rounded-lg.hover:bg-gray-100.transition-colors
            .flex-shrink-0
              .w-8.h-8.rounded-full.bg-white.flex.items-center.justify-center.shadow-sm
                %i{class: "#{activity.action_icon} #{activity.action_color} text-sm"}
            .flex-1.min-w-0
              %p.text-sm.font-medium.text-gray-900= activity.description
              %p.text-xs.text-gray-500
                %span.font-medium= activity.user.full_name
                %span.mx-1 â€¢
                %span= activity.formatted_time
            .flex-shrink-0
              = link_to admin_activity_path(activity), class: 'text-blue-600 hover:text-blue-900' do
                %i.fas.fa-eye.text-sm
    - else
      .text-center.py-8
        %i.fas.fa-chart-line.text-4xl.text-gray-300.mb-4
        %p.text-gray-500 No recent activities found. 

  / ==== Pending Documents Section ====
  - pending_docs = Document.includes(:user).where(status: 'pending')
  - if pending_docs.any?
    .bg-white.rounded-xl.shadow.p-8.mb-8
      %h2.text-xl.font-bold.text-blue-900.mb-4 Pending Documents
      %table.min-w-full.border-separate{ style: "border-spacing: 0 0.75rem;" }
        %thead
          %tr
            %th.px-6.py-3.text-left.text-xs.font-bold.text-blue-700.uppercase.bg-blue-50.rounded-l-lg User
            %th.px-6.py-3.text-left.text-xs.font-bold.text-blue-700.uppercase.bg-blue-50 Document
            %th.px-6.py-3.text-left.text-xs.font-bold.text-blue-700.uppercase.bg-blue-50 Type
            %th.px-6.py-3.text-left.text-xs.font-bold.text-blue-700.uppercase.bg-blue-50.rounded-r-lg Status
        %tbody
          - pending_docs.each do |doc|
            %tr.bg-blue-50.rounded-lg.shadow.hover:bg-blue-100.transition.cursor-pointer{ onclick: "window.location='#{admin_document_path(doc)}'" }
              %td.px-6.py-4.font-medium.text-gray-900.rounded-l-lg= doc.user&.full_name.presence || doc.user&.email
              %td.px-6.py-4.text-gray-700= doc.doc_name
              %td.px-6.py-4.text-gray-700= doc.document_type.titleize
              %td.px-6.py-4.text-yellow-700.rounded-r-lg Pending
  - else
    .bg-white.rounded-xl.shadow.p-8.mb-8
      %h2.text-xl.font-bold.text-blue-900.mb-4 Pending Documents
      %p.text-gray-500 No pending documents found.

  / ==== Pending Car Documents Section ====
  - pending_car_docs = CarDocument.includes(car: :vendor).where(document_status: CarDocument.document_statuses[:pending])
  - if pending_car_docs.any?
    .bg-white.rounded-xl.shadow.p-8.mb-8
      %h2.text-xl.font-bold.text-blue-900.mb-4 Pending Car Documents
      %table.min-w-full.border-separate{ style: "border-spacing: 0 0.75rem;" }
        %thead
          %tr
            %th.px-6.py-3.text-left.text-xs.font-bold.text-blue-700.uppercase.bg-blue-50.rounded-l-lg Car
            %th.px-6.py-3.text-left.text-xs.font-bold.text-blue-700.uppercase.bg-blue-50 Vendor
            %th.px-6.py-3.text-left.text-xs.font-bold.text-blue-700.uppercase.bg-blue-50 Status
            %th.px-6.py-3.text-left.text-xs.font-bold.text-blue-700.uppercase.bg-blue-50.rounded-r-lg Actions
        %tbody
          - pending_car_docs.each do |car_doc|
            %tr.bg-blue-50.rounded-lg.shadow.hover:bg-blue-100.transition
              %td.px-6.py-4.font-medium.text-gray-900.rounded-l-lg= car_doc.car&.full_name
              %td.px-6.py-4.text-gray-700= car_doc.car&.vendor&.display_name || '-'
              %td.px-6.py-4.text-yellow-700 Pending
              %td.px-6.py-4.rounded-r-lg.flex.gap-2
                - if car_doc.mulkiya.attached?  
                  = link_to 'View', admin_document_path(car_doc, type: 'car_document'), class: 'inline-block bg-blue-100 text-blue-800 font-semibold px-4 py-1 rounded-lg hover:bg-blue-200 transition'
  - else
    .bg-white.rounded-xl.shadow.p-8.mb-8
      %h2.text-xl.font-bold.text-blue-900.mb-4 Pending Car Documents
      %p.text-gray-500 No pending car documents found.

  / ==== Pending Vendor Trade License Section ====
  - pending_vendor_trade_license = VendorDocument.includes(:vendor).where(document_status: VendorDocument.document_statuses[:pending])
  - if pending_vendor_trade_license.any?
    .bg-white.rounded-xl.shadow.p-8.mb-8
      %h2.text-xl.font-bold.text-blue-900.mb-4 Pending Vendor Trade Licenses
      %table.min-w-full.border-separate{ style: "border-spacing: 0 0.75rem;" }
        %thead
          %tr
            %th.px-6.py-3.text-left.text-xs.font-bold.text-blue-700.uppercase.bg-blue-50.rounded-l-lg ID
            %th.px-6.py-3.text-left.text-xs.font-bold.text-blue-700.uppercase.bg-blue-50 Vendor
            %th.px-6.py-3.text-left.text-xs.font-bold.text-blue-700.uppercase.bg-blue-50 Status
            %th.px-6.py-3.text-left.text-xs.font-bold.text-blue-700.uppercase.bg-blue-50.rounded-r-lg Actions
        %tbody
          - pending_vendor_trade_license.each do |vendor_doc|
            %tr.bg-blue-50.rounded-lg.shadow.hover:bg-blue-100.transition
              %td.px-6.py-4.font-medium.text-gray-900.rounded-l-lg= vendor_doc.vendor.id
              %td.px-6.py-4.text-gray-700= vendor_doc.vendor&.display_name || '-'
              %td.px-6.py-4.text-yellow-700 Pending
              %td.px-6.py-4.rounded-r-lg.flex.gap-2
                - if vendor_doc.trade_license.attached?  
                  = link_to 'View', admin_document_path(vendor_doc, type: 'trade_license'), class: 'inline-block bg-blue-100 text-blue-800 font-semibold px-4 py-1 rounded-lg hover:bg-blue-200 transition'
  - else
    .bg-white.rounded-xl.shadow.p-8.mb-8
      %h2.text-xl.font-bold.text-blue-900.mb-4 Pending Vendor Trade Licenses
      %p.text-gray-500 No pending vendor trade licenses found.