.w-full.min-h-screen.bg-gradient-to-br.from-blue-50.to-blue-100
  .px-4.md:px-12.lg:px-32
    
    = render 'shared/user_header'
    
    .mx-auto
      / Back Button
      .mb-6
        = link_to user_home_path, class: 'inline-flex items-center text-blue-600 hover:text-blue-800 font-semibold transition-colors' do
          %i.fas.fa-arrow-left.mr-2
          Back to Dashboard
    
      .bg-white.rounded-2xl.shadow-lg.p-8.mt-0
        - if flash[:alert]
          .mb-8.p-4.bg-red-100.border-l-4.border-red-500.rounded.text-red-700.font-semibold.text-center= flash[:alert]
        %h2.text-xl.font-semibold.text-gray-600.mb-4 Bookings
        - if @bookings.any?
          .grid.grid-cols-1.md:grid-cols-2.gap-8
            - @bookings.each do |booking|
              .bg-white.rounded-xl.shadow-md.p-6.flex.flex-lg-fill.justify-between.relative
                / Car Info
                .flex.items-center.gap-4.mb-4
                  - if booking.car&.main_image_url.present?
                    %img.w-100.h-24.object-cover.rounded.shadow{src: booking.car.main_image_url, alt: booking.car.model}
                  - else
                    %span.inline-block.w-20.h-14.bg-blue-100.flex.items-center.justify-center.rounded.text-blue-400 N/A
                  .flex-1
                    %div.font-bold.text-blue-900= booking.car&.model || 'N/A'
                    %div.text-sm.text-gray-500= booking.car&.brand || '-'
                    %div.text-xs.text-gray-400= booking.car&.year || '-'
                / Booking Dates & Status
                .flex.items-center.justify-between.mb-2
                  %div
                    %span.text-xs.text-gray-500 Start:
                    %span.font-semibold= booking.start_date.strftime('%b %d, %Y')
                    %span.text-xs.text-gray-500.ml-2 End:
                    %span.font-semibold= booking.end_date.strftime('%b %d, %Y')
                / Payment
                .flex.items-center.justify-between
                  %div
                    - if booking.payment_processed?
                      %span.inline-block.bg-green-100.text-green-700.px-3.py-1.rounded-full.text-xs.font-semibold Paid
                    - elsif flash[:alert]
                      %span.inline-block.bg-yellow-200.text-yellow-700.font-bold.px-4.py-1.rounded-full.text-xs.shadow.cursor-not-allowed(title='Please complete your documents to proceed with payment.') Pay
                    - else
                      = link_to 'Pay', users_payment_path(booking.id), 
                          class: 'inline-block bg-yellow-400 text-yellow-900 font-bold px-4 py-1 rounded-full text-xs shadow hover:bg-yellow-500 transition pay-btn',
                          data: { pending_docs: (current_user.has_required_pending_document? ? 'true' : 'false') }
              
        - else
          %p.text-gray-500.mt-4 You have no bookings yet.

:javascript
  document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('.pay-btn').forEach(function(btn) {
      btn.addEventListener('click', function(e) {
        if (btn.dataset.pendingDocs === 'true') {
          e.preventDefault();
          alert("Your documents are under review. We'll notify you once they're approved, and you can proceed with your booking.");
        }
      });
    });
  });
